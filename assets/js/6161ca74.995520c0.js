(self.webpackChunkwhatspie_doc=self.webpackChunkwhatspie_doc||[]).push([[6194],{57956:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Collapsible:()=>r.z,ErrorBoundaryError:()=>_.aG,ErrorBoundaryTryAgainButton:()=>_.Cw,ErrorCauseBoundary:()=>_.QW,HtmlClassNameProvider:()=>c.FG,NavbarSecondaryMenuFiller:()=>g.Zo,PageMetadata:()=>c.d,ReactContextError:()=>d.i6,SkipToContentFallbackId:()=>O.u,SkipToContentLink:()=>O.l,ThemeClassNames:()=>p.k,composeProviders:()=>d.Qc,createStorageSlot:()=>s.WA,duplicates:()=>x.l,filterDocCardListItems:()=>o.MN,isMultiColumnFooterLinks:()=>v.a,isRegexpStringMatch:()=>S.F,listStorageKeys:()=>s._f,listTagsByLetters:()=>f.P,prefersReducedMotion:()=>u.n,processAdmonitionProps:()=>R,translateTagsPageTitle:()=>f.M,uniq:()=>x.j,useCollapsible:()=>r.u,useColorMode:()=>m.I,useContextualSearchFilters:()=>l._q,useCurrentSidebarCategory:()=>o.jA,useDocsPreferredVersion:()=>T.J,useEvent:()=>d.zX,useIsomorphicLayoutEffect:()=>d.LI,usePluralForm:()=>i.c,usePrevious:()=>d.D9,usePrismTheme:()=>M.p,useSearchLinkCreator:()=>b,useSearchQueryString:()=>N,useStorageSlot:()=>s.Nk,useThemeConfig:()=>a.L,useWindowSize:()=>h.i});var a=n(86668),s=n(50012),l=n(43320),o=n(53438),i=n(88824),r=n(86043),p=n(35281),u=n(91442),d=n(902),c=n(10833),m=n(92949),g=n(13102),h=n(87524),f=n(35155),y=n(67294),w=n(52263),k=n(91980);function N(){return(0,k.Nc)("q")}function b(){const{siteConfig:{baseUrl:e,themeConfig:t}}=(0,w.default)(),{algolia:{searchPagePath:n}}=t;return(0,y.useCallback)((t=>`${e}${n}?q=${encodeURIComponent(t)}`),[e,n])}var v=n(42489),S=n(98022),x=n(67392),M=n(66412),T=n(60373);function R(e){const{mdxAdmonitionTitle:t,rest:n}=function(e){const t=y.Children.toArray(e),n=t.find((e=>y.isValidElement(e)&&"mdxAdmonitionTitle"===e.props?.mdxType)),a=y.createElement(y.Fragment,null,t.filter((e=>e!==n)));return{mdxAdmonitionTitle:n?.props.children,rest:a}}(e.children),a=e.title??t;return{...e,...a&&{title:a},children:n}}var O=n(55225),_=n(69690)},35155:(e,t,n)=>{"use strict";n.d(t,{M:()=>s,P:()=>l});var a=n(95999);const s=()=>(0,a.I)({id:"theme.tags.tagsPageTitle",message:"Tags",description:"The title of the tag list page"});function l(e){const t={};return Object.values(e).forEach((e=>{const n=function(e){return e[0].toUpperCase()}(e.label);t[n]??=[],t[n].push(e)})),Object.entries(t).sort(((e,t)=>{let[n]=e,[a]=t;return n.localeCompare(a)})).map((e=>{let[t,n]=e;return{letter:t,tags:n.sort(((e,t)=>e.label.localeCompare(t.label)))}}))}},88824:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var a=n(67294),s=n(52263),l=n(25108);const o=["zero","one","two","few","many","other"];function i(e){return o.filter((t=>e.includes(t)))}const r={locale:"en",pluralForms:i(["one","other"]),select:e=>1===e?"one":"other"};function p(){const{i18n:{currentLocale:e}}=(0,s.default)();return(0,a.useMemo)((()=>{try{return function(e){const t=new Intl.PluralRules(e);return{locale:e,pluralForms:i(t.resolvedOptions().pluralCategories),select:e=>t.select(e)}}(e)}catch(t){return l.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${t.message}\n`),r}}),[e])}function u(){const e=p();return{selectMessage:(t,n)=>function(e,t,n){const a=e.split("|");if(1===a.length)return a[0];a.length>n.pluralForms.length&&l.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${a.length}: ${e}`);const s=n.select(t),o=n.pluralForms.indexOf(s);return a[Math.min(o,a.length-1)]}(n,t,e)}}},3158:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(67294)),l=a(n(93162));t.default=function(e){let{url:t,proxy:n}=e;return s.default.createElement("div",{style:{float:"right"},className:"dropdown dropdown--hoverable dropdown--right"},s.default.createElement("button",{className:"export-button button button--sm button--secondary"},"Export"),s.default.createElement("ul",{className:"export-dropdown dropdown__menu"},s.default.createElement("li",null,s.default.createElement("a",{onClick:e=>{e.preventDefault(),(e=>{let t;(e.endsWith("json")||e.endsWith("yaml")||e.endsWith("yml"))&&(t=e.substring(e.lastIndexOf("/")+1)),l.default.saveAs(e,t||"openapi.txt")})(`${t}`)},className:"dropdown__link",href:`${t}`},"OpenAPI Spec"))))}},39620:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(67294)),l=n(57956),o=a(n(44996)),i=a(n(50941));t.default=function(e){const{colorMode:t}=(0,l.useColorMode)(),{logo:n,darkLogo:a}=e,r=()=>"dark"===t?a?.altText??n?.altText:n?.altText,p=(0,o.default)(n?.url),u=(0,o.default)(a?.url);return n&&a?s.default.createElement(i.default,{alt:r(),sources:{light:p,dark:u},className:"openapi__logo"}):n||a?s.default.createElement(i.default,{alt:r(),sources:{light:p??u,dark:p??u},className:"openapi__logo"}):void 0}},29539:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var a=n(87462),s=(n(67294),n(3905));n(39620),n(9472),n(85162),n(3158);const l={id:"webhook",title:"Webhook",description:"Webhook",sidebar_label:"Webhook",hide_title:!0,custom_edit_url:null},o=void 0,i={unversionedId:"whatspie/webhook",id:"whatspie/webhook",title:"Webhook",description:"Webhook",source:"@site/docs/whatspie/webhook.mdx",sourceDirName:"whatspie",slug:"/whatspie/webhook",permalink:"/docs/whatspie/webhook",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"webhook",title:"Webhook",description:"Webhook",sidebar_label:"Webhook",hide_title:!0,custom_edit_url:null},sidebar:"WhatspieApiSideBar",previous:{title:"Check phone number is on WhatsApp",permalink:"/docs/whatspie/checkphonenumberison-whats-app"}},r={},p=[{value:"Examples Response JSON",id:"examples-response-json",level:2},{value:"General Text Message",id:"general-text-message",level:3},{value:"Document Type Message",id:"document-type-message",level:3},{value:"Image Type Message",id:"image-type-message",level:3},{value:"Contact Type Message",id:"contact-type-message",level:3},{value:"Audio Type Message",id:"audio-type-message",level:3},{value:"Replying Message Response",id:"replying-message-response",level:2},{value:"Single Message",id:"single-message",level:3},{value:"Reply with Image message",id:"reply-with-image-message",level:3},{value:"Reply with File message",id:"reply-with-file-message",level:3},{value:"Reply with Button message (Deprecated)",id:"reply-with-button-message-deprecated",level:3},{value:"Reply with Template message (Deprecated)",id:"reply-with-template-message-deprecated",level:3},{value:"Reply with List message (Deprecated)",id:"reply-with-list-message-deprecated",level:3},{value:"Reply with Reaction message",id:"reply-with-reaction-message",level:3},{value:"Reply with Multiple message",id:"reply-with-multiple-message",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("span",{className:"theme-doc-version-badge badge badge--secondary"},"Version: 2.0.0"),(0,s.kt)("h1",{className:"openapi__heading"},"Webhook"),(0,s.kt)("p",null,"To receive a webhook message you need to configure the webhook url on each devices configuration. ",(0,s.kt)("strong",{parentName:"p"},"Go to Devices -> configuration")," and add webhook url."),(0,s.kt)("h1",{id:"what-can-i-receive-"},"What Can I Receive ?"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Response JSON General Text Message"),(0,s.kt)("li",{parentName:"ol"},"Response JSON Document Type Message"),(0,s.kt)("li",{parentName:"ol"},"Response JSON Image Type Message"),(0,s.kt)("li",{parentName:"ol"},"Response JSON Contact Type Message"),(0,s.kt)("li",{parentName:"ol"},"Response JSON Audo Type Message"),(0,s.kt)("li",{parentName:"ol"},"Response JSON Replying Message",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Reply with Single Message"),(0,s.kt)("li",{parentName:"ul"},"Reply With Image Message"),(0,s.kt)("li",{parentName:"ul"},"Reply With File Message"),(0,s.kt)("li",{parentName:"ul"},"Reply With Button Message (Deprecated)"),(0,s.kt)("li",{parentName:"ul"},"Reply With Template Message (Deprecated)"),(0,s.kt)("li",{parentName:"ul"},"Reply With List Message (Deprecated)"),(0,s.kt)("li",{parentName:"ul"},"Reply With Reaction"),(0,s.kt)("li",{parentName:"ul"},"Reply With Multiple Message")))),(0,s.kt)("p",null,"This i give you and examples format for handle your webhook:"),(0,s.kt)("h2",{id:"examples-response-json"},"Examples Response JSON"),(0,s.kt)("h3",{id:"general-text-message"},"General Text Message"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "message": "help",\n    "from": "62856123456",\n    "timestamp": 1581651709,\n    "message_id": "3219EDE2131",\n    "from_user": {\n        "name": "Contact Name",\n        "jid": "Unique WA ID"\n    },\n    "is_forwarded": false,\n    "is_broadcast": false\n}\n')),(0,s.kt)("h3",{id:"document-type-message"},"Document Type Message"),(0,s.kt)("p",null,"This message type only work with ",(0,s.kt)("strong",{parentName:"p"},"Startup package")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n  "type": "documentMessage",\n  "file": {\n    "url": "https://whatspie.is3.cloudhost.id/whatspie/messages/2022-10-05/2313213F3213.pdf",\n    "caption": null,\n    "fileName": "file_name.pdf"\n  },\n  "from": "62856123456",\n  "participant": null,\n  "timestamp": 1664933170,\n  "message_id": "2313213F3213",\n  "from_user": {\n    "name": "Sender Name",\n    "jid": "62856123456@s.whatsapp.net"\n  },\n  "is_forwared": false,\n  "is_broadcast": false\n}\n\n')),(0,s.kt)("h3",{id:"image-type-message"},"Image Type Message"),(0,s.kt)("p",null,"This message type only work with ",(0,s.kt)("strong",{parentName:"p"},"Startup package")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n  "type": "imageMessage",\n  "file": {\n    "url": "https://whatspie.is3.cloudhost.id/whatspie/messages/2022-10-05/3EB0237E918896635AD332133.jpeg",\n    "caption": "hi gan",\n    "fileName": null\n  },\n  "from": "628561234456",\n  "participant": null,\n  "timestamp": 1664932915,\n  "message_id": "3EB0237E918896635AD3",\n  "from_user": {\n    "name": "Sender Name",\n    "jid": "628561234456@s.whatsapp.net"\n  },\n  "is_forwared": false,\n  "is_broadcast": false\n}\n\n')),(0,s.kt)("h3",{id:"contact-type-message"},"Contact Type Message"),(0,s.kt)("p",null,"This message type only work with ",(0,s.kt)("strong",{parentName:"p"},"Startup package")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n  "type": "contactMessage",\n  "contacts": [\n    {\n      "displayName": "Contact Name",\n      "vcard": "BEGIN:VCARD\\nVERSION:3.0\\nN:;A77;;;\\nFN:A77\\nTEL;type=CELL;waid=6285846255569:+62 858-4625-5569\\nEND:VCARD"\n    }\n  ],\n  "from": "628561234456",\n  "participant": null,\n  "timestamp": 1664933238,\n  "message_id": "3EB0E9CAAA9BBC8C1081",\n  "from_user": {\n    "name": "Sender Name",\n    "jid": "628561234456@s.whatsapp.net"\n  },\n  "is_forwared": false,\n  "is_broadcast": false\n}\n\n')),(0,s.kt)("h3",{id:"audio-type-message"},"Audio Type Message"),(0,s.kt)("p",null,"This message type only work with ",(0,s.kt)("strong",{parentName:"p"},"Startup package")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n  "type": "audioMessage",\n  "file": {\n    "url": "https://whatspie.is3.cloudhost.id/whatspie/messages/2022-10-05/3EB0E9CAAA9BBC8C1081.oga",\n    "caption": null,\n    "fileName": null,\n    "seconds": 3\n  },\n  "from": "628561234456",\n  "participant": null,\n  "timestamp": 1664932741,\n  "message_id": "3EB0E9CAAA9BBC8C1081",\n  "from_user": {\n    "name": "Sender Name",\n    "jid": "628561234456@s.whatsapp.net"\n  },\n  "is_forwared": false,\n  "is_broadcast": false\n}\n')),(0,s.kt)("h2",{id:"replying-message-response"},"Replying Message Response"),(0,s.kt)("p",null,"To replying using webhook, you need to return valid json content with following format, other wise whatspie will not replying back the message."),(0,s.kt)("h3",{id:"single-message"},"Single Message"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "type": "chat",\n    "body": "This is reply\\n",\n    "simulation": true\n}\n')),(0,s.kt)("h3",{id:"reply-with-image-message"},"Reply with Image message"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n        "type": "chat",\n        "body": "Hello",\n        "params": {\n            "image": {\n                "url": "https://images.unsplash.com/photo-1653764982079-c7c5e4fd682a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"\n            },\n            "caption": "Lovely Photo"\n        }\n}\n')),(0,s.kt)("h3",{id:"reply-with-file-message"},"Reply with File message"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "type": "chat",\n    "body": "Hello",\n    "params": {\n        "document": {\n            "url": "http://www.africau.edu/images/default/sample.pdf"\n        },\n        "fileName": "file.pdf",\n        "mimeType": "application/pdf"\n    }\n}\n')),(0,s.kt)("h3",{id:"reply-with-button-message-deprecated"},"Reply with Button message (Deprecated)"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "type": "chat",\n    "body": "Hello",\n    "params": {\n        "text": "This is button message from Whatspie!",\n        "footer": "This is footer",\n        "buttons": [\n            {\n                "buttonId": "id1",\n                "buttonText": {\n                    "displayText": "Button 1"\n                },\n                "type": 1\n            }\n        ]\n    }\n}\n')),(0,s.kt)("h3",{id:"reply-with-template-message-deprecated"},"Reply with Template message (Deprecated)"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "type": "chat",\n    "body": "Hello",\n    "params": {\n        "text": "This is template message from Whatspie!",\n        "footer": "This is footer",\n        "image": {\n            "url": "https://images.unsplash.com/photo-1653764982079-c7c5e4fd682a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"\n        },\n        "templateButtons": [\n            {\n                "index": 1,\n                "urlButton": {\n                    "displayText": "Visit Whatspie",\n                    "url": "https://whatspie.com"\n                }\n            },\n            {\n                "index": 2,\n                "callButton": {\n                    "displayText": "Call Button",\n                    "phoneNumber": "+62 815-6365-5211"\n                }\n            },\n            {\n                "index": 3,\n                "quickReplyButton": {\n                    "displayText": "Quick Reply Button",\n                    "id": "id-like-buttons-message"\n                }\n            }\n        ]\n    }\n}\n')),(0,s.kt)("h3",{id:"reply-with-list-message-deprecated"},"Reply with List message (Deprecated)"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n    "type": "chat",\n    "body": "Hello",\n    "params": {\n        "text": "This is a list",\n        "footer": "This is footer",\n        "title": "This is footer title",\n        "buttonText": "Required, text on the button to view the list",\n        "sections": [\n            {\n                "title": "Section 1",\n                "rows": [\n                    {\n                        "title": "Option 1",\n                        "rowId": "option1"\n                    },\n                    {\n                        "title": "Option 2",\n                        "rowId": "option2"\n                    }\n                ]\n            }\n        ]\n    }\n}\n')),(0,s.kt)("h3",{id:"reply-with-reaction-message"},"Reply with Reaction message"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'{\n   "type" : "reaction",\n   "body" : "\ud83e\udd23"\n}\n')),(0,s.kt)("h3",{id:"reply-with-multiple-message"},"Reply with Multiple message"),(0,s.kt)("p",null,"to reply this message you need to return response will following JSON response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="JSON"',title:'"JSON"'},'[\n  {\n    "type": "chat",\n    "body": "First message",\n    "simulation": true\n  },\n  {\n    "type": "chat",\n    "body": "Second Message",\n    "simulation": true\n  }\n]\n')))}d.isMDXComponent=!0},93162:function(e,t,n){var a,s,l,o=n(25108);s=[],void 0===(l="function"==typeof(a=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(o.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){p(a.response,t,n)},a.onerror=function(){o.error("could not download file")},a.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function l(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,t,n){var o=i.URL||i.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?l(r):s(r.href)?a(e,t,n):l(r,r.target="_blank")):(r.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(r.href)}),4e4),setTimeout((function(){l(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(s(e))a(e,n,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){l(i)}))}}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,n);var l="application/octet-stream"===e.type,o=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&o||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=p?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,c=d.createObjectURL(e);s?s.location=c:location.href=c,s=null,setTimeout((function(){d.revokeObjectURL(c)}),4e4)}});i.saveAs=p.saveAs=p,e.exports=p})?a.apply(t,s):a)||(e.exports=l)}}]);